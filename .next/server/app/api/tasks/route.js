(()=>{var e={};e.id=456,e.ids=[456],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7462:(e,t,s)=>{"use strict";s.d(t,{A:()=>i,z:()=>r});var a=s(96330);let r=globalThis.prisma??new a.PrismaClient({log:["error"]});process.on("beforeExit",async()=>{await r.$disconnect()});let i=r},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},14985:e=>{"use strict";e.exports=require("dns")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},36781:(e,t,s)=>{"use strict";s.d(t,{PP:()=>c,xC:()=>l});var a=s(70300),r=s.n(a);let i={host:process.env.REDIS_HOST||"localhost",port:parseInt(process.env.REDIS_PORT||"6379"),password:process.env.REDIS_PASSWORD,maxRetriesPerRequest:3,retryDelayOnFailover:100,enableReadyCheck:!0,lazyConnect:!0};class n{static{this.instance=null}static{this.isConnected=!1}static getInstance(){return this.instance||(this.instance=new(r())(i),this.instance.on("connect",()=>{this.isConnected=!0}),this.instance.on("error",e=>{console.error("âŒ Redis error:",e.message),this.isConnected=!1}),this.instance.on("close",()=>{this.isConnected=!1})),this.instance}static async connect(){try{let e=this.getInstance();return await e.connect(),!0}catch{return console.warn("Redis connection failed, using fallback cache"),!1}}static getConnectionStatus(){return this.isConnected}}let o=n.getInstance(),c={async get(e){try{let t=await o.get(e);return t?JSON.parse(t):null}catch{return null}},async set(e,t,s=3600){try{return await o.setex(e,s,JSON.stringify(t)),!0}catch{return!1}},async del(e){try{return await o.del(e),!0}catch{return!1}},async invalidatePattern(e){try{let t=await o.keys(e);t.length>0&&await o.del(...t)}catch{console.error("Failed to invalidate cache pattern:",e)}},async getOrSet(e,t,s=3600){let a=await this.get(e);if(null!==a)return a;let r=await t();return await this.set(e,r,s),r}},l={async checkLimit(e,t,s){let a=Date.now(),r=`ratelimit:${e}:${Math.floor(a/(1e3*s))}`;try{let e=await o.incr(r);1===e&&await o.expire(r,s);let i=Math.max(0,t-e),n=Math.ceil(a/(1e3*s))*s*1e3;return{allowed:e<=t,remaining:i,resetAt:n}}catch{return{allowed:!0,remaining:t,resetAt:a+1e3*s}}}}},41204:e=>{"use strict";e.exports=require("string_decoder")},43425:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>y,routeModule:()=>f,serverHooks:()=>k,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>w});var a={};s.r(a),s.d(a,{GET:()=>h,POST:()=>x,runtime:()=>m});var r=s(96559),i=s(48088),n=s(37719),o=s(32190),c=s(7462),l=s(36781),u=s(81310),d=s(61774),p=s(45740);let m="nodejs";async function h(e){let t=Date.now();try{let s=await (0,u.Ht)();if(!s)return o.NextResponse.json({error:"Unauthorized"},{status:401});let{searchParams:a}=new URL(e.url),r={page:a.get("page")||"1",limit:a.get("limit")||"20",status:a.get("status"),priority:a.get("priority"),search:a.get("search"),sortBy:a.get("sortBy")||"createdAt",sortOrder:a.get("sortOrder")||"desc"},i=d.Vs.safeParse(r);if(!i.success)return o.NextResponse.json({error:"Invalid parameters",details:i.error.flatten()},{status:400});let{page:n,limit:m,status:h,priority:x,search:f,sortBy:g,sortOrder:w}=i.data,k=`tasks:${s.userId}:${JSON.stringify(r)}`,y=await l.PP.get(k);if(y)return o.NextResponse.json(y,{headers:{"X-Cache":"HIT","X-Response-Time":`${Date.now()-t}ms`}});let I={userId:s.userId};h&&(I.status=h),x&&(I.priority=x),f&&(I.OR=[{title:{contains:f,mode:"insensitive"}},{description:{contains:f,mode:"insensitive"}}]);let[P,v]=await Promise.all([c.A.task.findMany({where:I,orderBy:{[g]:w},skip:(n-1)*m,take:m,select:{id:!0,title:!0,description:!0,status:!0,priority:!0,dueDate:!0,estimatedTime:!0,tags:!0,createdAt:!0,completedAt:!0}}),c.A.task.count({where:I})]),j={data:P,pagination:{page:n,limit:m,total:v,totalPages:Math.ceil(v/m)}};return await l.PP.set(k,j,300),p.vF.info("Tasks fetched",{userId:s.userId,count:P.length,responseTime:Date.now()-t}),o.NextResponse.json(j,{headers:{"X-Cache":"MISS","X-Response-Time":`${Date.now()-t}ms`}})}catch(e){return p.vF.error("Failed to fetch tasks",{error:e}),o.NextResponse.json({error:"Failed to fetch tasks"},{status:500})}}async function x(e){let t=Date.now();try{let s=await (0,u.Ht)();if(!s)return o.NextResponse.json({error:"Unauthorized"},{status:401});let a=await e.json(),r=await c.A.task.create({data:{...a,userId:s.userId}});return await l.PP.invalidatePattern(`tasks:${s.userId}:*`),p.vF.info("Task created",{userId:s.userId,taskId:r.id,responseTime:Date.now()-t}),o.NextResponse.json(r,{status:201})}catch(e){return p.vF.error("Failed to create task",{error:e}),o.NextResponse.json({error:"Failed to create task"},{status:500})}}let f=new r.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/tasks/route",pathname:"/api/tasks",filename:"route",bundlePath:"app/api/tasks/route"},resolvedPagePath:"/Users/ronakkumar/Desktop/make-it/Make_it/app/api/tasks/route.ts",nextConfigOutput:"standalone",userland:a}),{workAsyncStorage:g,workUnitAsyncStorage:w,serverHooks:k}=f;function y(){return(0,n.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:w})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},45740:(e,t,s)=>{"use strict";s.d(t,{Ng:()=>m,nM:()=>p,vF:()=>d});var a=s(91728),r=s.n(a);let{combine:i,timestamp:n,printf:o,colorize:c,errors:l}=r().format,u=o(({level:e,message:t,timestamp:s,stack:a,...r})=>{let i=`${s} [${e}]: ${t}`;return Object.keys(r).length>0&&(i+=` ${JSON.stringify(r)}`),a&&(i+=`
${a}`),i}),d=r().createLogger({level:process.env.LOG_LEVEL||"info",format:i(l({stack:!0}),n({format:"YYYY-MM-DD HH:mm:ss"}),u),defaultMeta:{service:"studystreak"},transports:[new(r()).transports.Console({format:i(c({all:!0}),u)})]});d.add(new(r()).transports.File({filename:"logs/error.log",level:"error",maxsize:5242880,maxFiles:5})),d.add(new(r()).transports.File({filename:"logs/combined.log",maxsize:5242880,maxFiles:5}));let p=(e,t,s,a)=>{d.info("AI Request",{action:e,model:t,tokens:s,duration:a?`${a}ms`:void 0})},m=(e,t,s)=>{d[t>1e3?"warn":"info"]("Performance",{operation:e,duration:`${t}ms`,slow:t>1e3,...s})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57729:()=>{},61774:(e,t,s)=>{"use strict";s.d(t,{Vs:()=>o,X5:()=>r,cU:()=>n,zK:()=>i});var a=s(10209);let r=a.Ik({email:a.Yj().email("Invalid email address"),password:a.Yj().min(8,"Password must be at least 8 characters"),remember:a.zM().optional().default(!1)}),i=a.Ik({name:a.Yj().min(2,"Name must be at least 2 characters").max(50,"Name must be less than 50 characters").regex(/^[a-zA-Z\s]+$/,"Name can only contain letters and spaces"),email:a.Yj().email("Invalid email address"),password:a.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:a.Yj(),acceptTerms:a.zM().refine(e=>!0===e,"You must accept the terms")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});a.Ik({title:a.Yj().min(1,"Title is required").max(200,"Title must be less than 200 characters"),description:a.Yj().max(2e3,"Description too long").optional(),priority:a.k5(["LOW","MEDIUM","HIGH","URGENT"]).default("MEDIUM"),dueDate:a.Yj().datetime().optional().nullable(),estimatedTime:a.ai().min(1).max(480).optional(),tags:a.YO(a.Yj().max(30)).max(10).optional()}).partial().extend({status:a.k5(["PENDING","IN_PROGRESS","COMPLETED","ARCHIVED"]).optional()}),a.Ik({type:a.k5(["POMODORO","DEEP_WORK","CUSTOM"]).default("POMODORO"),duration:a.ai().min(1).max(240),taskId:a.Yj().cuid().optional(),notes:a.Yj().max(1e3).optional()}),a.Ik({title:a.Yj().min(3,"Title must be at least 3 characters").max(100,"Title must be less than 100 characters"),description:a.Yj().max(500).optional(),type:a.k5(["STUDY_TIME","TASK_COMPLETION","STREAK","CUSTOM"]),goal:a.ai().min(1,"Goal must be at least 1"),unit:a.Yj().min(1).max(20),startDate:a.Yj().datetime(),endDate:a.Yj().datetime(),isPublic:a.zM().default(!0)}).refine(e=>new Date(e.endDate)>new Date(e.startDate),{message:"End date must be after start date",path:["endDate"]});let n=a.Ik({message:a.Yj().min(1,"Message is required").max(4e3,"Message too long"),conversationId:a.Yj().cuid().optional(),context:a.Ik({currentTask:a.Yj().optional(),studyGoal:a.Yj().optional(),timeAvailable:a.ai().optional()}).optional()});a.Ik({theme:a.k5(["light","dark","system"]).default("system"),focusDuration:a.ai().min(5).max(120).default(25),shortBreakDuration:a.ai().min(1).max(30).default(5),longBreakDuration:a.ai().min(5).max(60).default(15),dailyGoal:a.ai().min(15).max(720).default(120),notificationsEnabled:a.zM().default(!0),soundEnabled:a.zM().default(!0),reducedMotion:a.zM().default(!1),aiPersonalization:a.zM().default(!0)});let o=a.Ik({page:a.au.number().min(1).default(1),limit:a.au.number().min(1).max(100).default(20),sortBy:a.Yj().optional(),sortOrder:a.k5(["asc","desc"]).default("desc")}).extend({status:a.k5(["PENDING","IN_PROGRESS","COMPLETED","ARCHIVED"]).optional(),priority:a.k5(["LOW","MEDIUM","HIGH","URGENT"]).optional(),search:a.Yj().max(100).optional(),tags:a.Yj().optional()})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81310:(e,t,s)=>{"use strict";s.d(t,{BE:()=>u,Er:()=>l,HU:()=>d,Ht:()=>m,nr:()=>p});var a=s(85663),r=s(43205),i=s.n(r),n=s(44999),o=s(36781);let c=process.env.JWT_SECRET||"your-super-secret-jwt-key-change-in-production";async function l(e){return a.Ay.hash(e,12)}async function u(e,t){return a.Ay.compare(e,t)}function d(e){return i().sign(e,c,{expiresIn:"7d"})}function p(e){try{return i().verify(e,c)}catch{return null}}async function m(){let e=await (0,n.UL)(),t=e.get("auth-token")?.value;return!t||await o.PP.get(`blacklist:${t}`)?null:p(t)}},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,475,999,315,300,209],()=>s(43425));module.exports=a})();