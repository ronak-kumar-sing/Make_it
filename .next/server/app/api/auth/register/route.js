(()=>{var e={};e.id=612,e.ids=[612],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4373:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>w,routeModule:()=>x,serverHooks:()=>g,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>f});var a={};r.r(a),r.d(a,{POST:()=>p});var s=r(96559),i=r(48088),n=r(37719),o=r(32190),l=r(7462),u=r(81310),c=r(61774),d=r(45740),m=r(44999);async function p(e){try{let t=await e.json(),r=c.zK.safeParse(t);if(!r.success)return o.NextResponse.json({error:"Validation failed",details:r.error.flatten()},{status:400});let{email:a,password:s,name:i}=r.data;if(await l.z.user.findUnique({where:{email:a.toLowerCase()}}))return o.NextResponse.json({error:"An account with this email already exists"},{status:409});let n=await (0,u.Er)(s),p=await l.z.user.create({data:{email:a.toLowerCase(),password:n,name:i,preferences:{create:{theme:"system",focusDuration:25,breakDuration:5,dailyGoal:8,notifications:!0,soundEnabled:!0}}},select:{id:!0,email:!0,name:!0,createdAt:!0}}),x=await (0,u.HU)({userId:p.id,email:p.email,role:"user"});return(await (0,m.UL)()).set("auth-token",x,{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:604800,path:"/"}),d.vF.info("User registered successfully",{userId:p.id}),o.NextResponse.json({message:"Account created successfully",user:{id:p.id,email:p.email,name:p.name}},{status:201})}catch(e){return d.vF.error("Registration error",{error:e}),o.NextResponse.json({error:"An error occurred during registration"},{status:500})}}let x=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/Users/ronakkumar/Desktop/make-it/Make_it/app/api/auth/register/route.ts",nextConfigOutput:"standalone",userland:a}),{workAsyncStorage:h,workUnitAsyncStorage:f,serverHooks:g}=x;function w(){return(0,n.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:f})}},7462:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,z:()=>s});var a=r(96330);let s=globalThis.prisma??new a.PrismaClient({log:["error"]});process.on("beforeExit",async()=>{await s.$disconnect()});let i=s},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},14985:e=>{"use strict";e.exports=require("dns")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},36781:(e,t,r)=>{"use strict";r.d(t,{PP:()=>l,xC:()=>u});var a=r(70300),s=r.n(a);let i={host:process.env.REDIS_HOST||"localhost",port:parseInt(process.env.REDIS_PORT||"6379"),password:process.env.REDIS_PASSWORD,maxRetriesPerRequest:3,retryDelayOnFailover:100,enableReadyCheck:!0,lazyConnect:!0};class n{static{this.instance=null}static{this.isConnected=!1}static getInstance(){return this.instance||(this.instance=new(s())(i),this.instance.on("connect",()=>{this.isConnected=!0}),this.instance.on("error",e=>{console.error("âŒ Redis error:",e.message),this.isConnected=!1}),this.instance.on("close",()=>{this.isConnected=!1})),this.instance}static async connect(){try{let e=this.getInstance();return await e.connect(),!0}catch{return console.warn("Redis connection failed, using fallback cache"),!1}}static getConnectionStatus(){return this.isConnected}}let o=n.getInstance(),l={async get(e){try{let t=await o.get(e);return t?JSON.parse(t):null}catch{return null}},async set(e,t,r=3600){try{return await o.setex(e,r,JSON.stringify(t)),!0}catch{return!1}},async del(e){try{return await o.del(e),!0}catch{return!1}},async invalidatePattern(e){try{let t=await o.keys(e);t.length>0&&await o.del(...t)}catch{console.error("Failed to invalidate cache pattern:",e)}},async getOrSet(e,t,r=3600){let a=await this.get(e);if(null!==a)return a;let s=await t();return await this.set(e,s,r),s}},u={async checkLimit(e,t,r){let a=Date.now(),s=`ratelimit:${e}:${Math.floor(a/(1e3*r))}`;try{let e=await o.incr(s);1===e&&await o.expire(s,r);let i=Math.max(0,t-e),n=Math.ceil(a/(1e3*r))*r*1e3;return{allowed:e<=t,remaining:i,resetAt:n}}catch{return{allowed:!0,remaining:t,resetAt:a+1e3*r}}}}},41204:e=>{"use strict";e.exports=require("string_decoder")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},45740:(e,t,r)=>{"use strict";r.d(t,{Ng:()=>p,nM:()=>m,vF:()=>d});var a=r(91728),s=r.n(a);let{combine:i,timestamp:n,printf:o,colorize:l,errors:u}=s().format,c=o(({level:e,message:t,timestamp:r,stack:a,...s})=>{let i=`${r} [${e}]: ${t}`;return Object.keys(s).length>0&&(i+=` ${JSON.stringify(s)}`),a&&(i+=`
${a}`),i}),d=s().createLogger({level:process.env.LOG_LEVEL||"info",format:i(u({stack:!0}),n({format:"YYYY-MM-DD HH:mm:ss"}),c),defaultMeta:{service:"studystreak"},transports:[new(s()).transports.Console({format:i(l({all:!0}),c)})]});d.add(new(s()).transports.File({filename:"logs/error.log",level:"error",maxsize:5242880,maxFiles:5})),d.add(new(s()).transports.File({filename:"logs/combined.log",maxsize:5242880,maxFiles:5}));let m=(e,t,r,a)=>{d.info("AI Request",{action:e,model:t,tokens:r,duration:a?`${a}ms`:void 0})},p=(e,t,r)=>{d[t>1e3?"warn":"info"]("Performance",{operation:e,duration:`${t}ms`,slow:t>1e3,...r})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57729:()=>{},61774:(e,t,r)=>{"use strict";r.d(t,{Vs:()=>o,X5:()=>s,cU:()=>n,zK:()=>i});var a=r(10209);let s=a.Ik({email:a.Yj().email("Invalid email address"),password:a.Yj().min(8,"Password must be at least 8 characters"),remember:a.zM().optional().default(!1)}),i=a.Ik({name:a.Yj().min(2,"Name must be at least 2 characters").max(50,"Name must be less than 50 characters").regex(/^[a-zA-Z\s]+$/,"Name can only contain letters and spaces"),email:a.Yj().email("Invalid email address"),password:a.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:a.Yj(),acceptTerms:a.zM().refine(e=>!0===e,"You must accept the terms")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});a.Ik({title:a.Yj().min(1,"Title is required").max(200,"Title must be less than 200 characters"),description:a.Yj().max(2e3,"Description too long").optional(),priority:a.k5(["LOW","MEDIUM","HIGH","URGENT"]).default("MEDIUM"),dueDate:a.Yj().datetime().optional().nullable(),estimatedTime:a.ai().min(1).max(480).optional(),tags:a.YO(a.Yj().max(30)).max(10).optional()}).partial().extend({status:a.k5(["PENDING","IN_PROGRESS","COMPLETED","ARCHIVED"]).optional()}),a.Ik({type:a.k5(["POMODORO","DEEP_WORK","CUSTOM"]).default("POMODORO"),duration:a.ai().min(1).max(240),taskId:a.Yj().cuid().optional(),notes:a.Yj().max(1e3).optional()}),a.Ik({title:a.Yj().min(3,"Title must be at least 3 characters").max(100,"Title must be less than 100 characters"),description:a.Yj().max(500).optional(),type:a.k5(["STUDY_TIME","TASK_COMPLETION","STREAK","CUSTOM"]),goal:a.ai().min(1,"Goal must be at least 1"),unit:a.Yj().min(1).max(20),startDate:a.Yj().datetime(),endDate:a.Yj().datetime(),isPublic:a.zM().default(!0)}).refine(e=>new Date(e.endDate)>new Date(e.startDate),{message:"End date must be after start date",path:["endDate"]});let n=a.Ik({message:a.Yj().min(1,"Message is required").max(4e3,"Message too long"),conversationId:a.Yj().cuid().optional(),context:a.Ik({currentTask:a.Yj().optional(),studyGoal:a.Yj().optional(),timeAvailable:a.ai().optional()}).optional()});a.Ik({theme:a.k5(["light","dark","system"]).default("system"),focusDuration:a.ai().min(5).max(120).default(25),shortBreakDuration:a.ai().min(1).max(30).default(5),longBreakDuration:a.ai().min(5).max(60).default(15),dailyGoal:a.ai().min(15).max(720).default(120),notificationsEnabled:a.zM().default(!0),soundEnabled:a.zM().default(!0),reducedMotion:a.zM().default(!1),aiPersonalization:a.zM().default(!0)});let o=a.Ik({page:a.au.number().min(1).default(1),limit:a.au.number().min(1).max(100).default(20),sortBy:a.Yj().optional(),sortOrder:a.k5(["asc","desc"]).default("desc")}).extend({status:a.k5(["PENDING","IN_PROGRESS","COMPLETED","ARCHIVED"]).optional(),priority:a.k5(["LOW","MEDIUM","HIGH","URGENT"]).optional(),search:a.Yj().max(100).optional(),tags:a.Yj().optional()})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81310:(e,t,r)=>{"use strict";r.d(t,{BE:()=>c,Er:()=>u,HU:()=>d,Ht:()=>p,nr:()=>m});var a=r(85663),s=r(43205),i=r.n(s),n=r(44999),o=r(36781);let l=process.env.JWT_SECRET||"your-super-secret-jwt-key-change-in-production";async function u(e){return a.Ay.hash(e,12)}async function c(e,t){return a.Ay.compare(e,t)}function d(e){return i().sign(e,l,{expiresIn:"7d"})}function m(e){try{return i().verify(e,l)}catch{return null}}async function p(){let e=await (0,n.UL)(),t=e.get("auth-token")?.value;return!t||await o.PP.get(`blacklist:${t}`)?null:m(t)}},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,475,999,315,300,209],()=>r(4373));module.exports=a})();